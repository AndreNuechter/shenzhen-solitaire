!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return i}));const o=[...document.getElementsByClassName("card-slot")],r=[...document.querySelectorAll('[data-slot-type="collection"]')],c=[...document.querySelectorAll('[data-slot-type="dragon"]')],a=document.getElementById("dragon-summoning-btns"),d=document.querySelector('[data-slot-type="flower"]'),l=document.getElementById("reset-btn"),s=[...document.querySelectorAll('[data-slot-type="stacking"]')],i=document.getElementById("table")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return s}));const o=8,r={x:0,y:0,rx:5},c="http://www.w3.org/2000/svg",a="ontouchstart"in window,[d,l]=a?["touchmove","touchend"]:["pointermove","pointerup"],s=10*(128+o)+o},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a}));const o=["checked","textContent","data","onpointerdown","onpointerup"];function r(e){return t=>c(e.cloneNode(!1),t)}function c(e,t){return Object.keys(t).forEach(n=>{o.includes(n)?e[n]=t[n]:e.setAttribute(n,t[n])}),e}function a(e,t){return Array.prototype.indexOf.call(e,t)}},function(e,t,n){n(5),e.exports=n(4)},function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(0),c=n(2);const a=(e,t)=>e.setAttribute("transform",`translate(0,${t*o.b*2})`),d=({addedNodes:[e]})=>{e.removeAttribute("transform"),e.classList.add("frozen")},l={collection:e=>t=>{t[0].addedNodes.length&&t.forEach(d),10===e.children.length&&e.classList.add("consumed")},dragon:e=>t=>{t[0].addedNodes.length&&t.forEach(({addedNodes:e})=>{e.forEach(e=>a(e,0))}),e.children.length>2&&e.classList.add("consumed")},flower:e=>t=>{t[0].addedNodes.length&&(t.forEach(d),e.classList.add("consumed"))},stacking:e=>t=>{t.forEach(({addedNodes:t},n)=>{t.forEach(t=>a(t,((e,t)=>e<0?t:e-1)(Object(c.c)(e.children,t),n)))})}};r.a.forEach(e=>{new MutationObserver(l[e.dataset.slotType](e)).observe(e,{childList:!0})})},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2),c=n(1);const a=document.createElementNS(c.e,"g"),d=document.createElementNS(c.e,"text"),l=Object(r.b)(document.createElementNS(c.e,"rect"),c.a),s={red:"â™•",black:"â˜ ",green:"Â¥",dragon:"â„¦",flower:"ðŸ’®"},i=(e,t)=>{const n=Object(r.a)(a)({class:"card"}),o=l.cloneNode(!1),c=Object(r.a)(d)({x:8,y:16});return c.textContent=e&&""===t?s.dragon:e?`${s[e]} ${t+1}`:s.flower,n.append(o,c),Object.assign(n.dataset,{color:e,value:t}),n},u=["black","red","green"].flatMap(e=>Array.from({length:13},(t,n)=>i(e,n<=8?n:"")));u.push(i("",""));var f=u;const h=e=>{for(let t=e.length-1;t>0;t-=1){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},g=(e,t)=>`translate(${e},${t})`,p=({dataset:{color:e,value:t}},n,o)=>n<o.length-1&&(+o[n+1].dataset.value!=t-1||o[n+1].dataset.color===e),m={dragon:(e,t)=>1===e.children.length&&1===t.children.length,flower:({children:[{dataset:{color:e,value:t}}]})=>!t&&!e,collection:({children:e},{children:t})=>{const n=e[0].dataset,o=t[t.length-1].dataset;return 1===e.length&&(1===t.length&&"0"===n.value||+n.value==+o.value+1&&n.color===o.color)},stacking:({children:[{dataset:e}]},{children:t})=>{const n=t[t.length-1].dataset;return 1===t.length||n.value&&+e.value==+n.value-1&&e.color!==n.color}},b=(e,t)=>m[t.dataset.slotType](e,t),v=(e,t)=>!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom),y=()=>o.g.every(e=>1===e.children.length),w=[/(\d)(,|\))/g,"$1px$2"],E=e=>e.getAttribute("transform").replace(...w),x=500,O=(e,t,n)=>{const r=E(n),a=E(e),d=`${E(t)}translateY(${(t.children.length-1)*c.b*2}px)`;o.h.append(n),n.animate({transform:[r+a,d],easing:["ease-in","ease-out"]},x).onfinish=()=>t.append(n)};let L;function N(e){h(e).forEach((e,t)=>o.g[t%8].append(e))}function j(){L=+(c.g/o.h.clientWidth).toFixed(2)}o.d.onclick=function({target:e}){const t=e.closest(".dragon-summoning-btn");if(!t)return;const{color:n}=t.dataset,r=[...o.g,...o.c].reduce((e,{children:t})=>{const{color:o,value:r}=t[t.length-1].dataset;return o!==n||r||e.push(t[t.length-1]),e},[]),c=o.c.find(({children:e})=>1===e.length||!e[1].dataset.value&&e[1].dataset.color===n);if(4===r.length&&c){const e=e=>O(e.parentElement,c,e);r.forEach((t,n)=>{t.classList.add("frozen"),setTimeout(e(t),25*n)})}},window.ondblclick=function({x:e,y:t}){const n=document.elementFromPoint(e,t).parentElement;if(!n.classList.contains("card"))return;const r=n.parentElement;if(!["dragon","stacking"].includes(r.dataset.slotType))return;if(r.lastChild!==n)return;const{color:c,value:a}=n.dataset;if(!a&&c)return;let d;if(a){const e="0"===a?e=>1===e.children.length:({lastChild:{dataset:{color:e,value:t}}})=>e===c&&+t==a-1;d=o.b.find(e)}else d=o.e;d&&O(r,d,n)},o.h.addEventListener("pointerdown",(function({target:e,x:t,y:n}){if(!e.parentNode.classList.contains("card"))return;const d=e.parentNode,l=d.parentNode,s=l.getAttribute("transform"),i=[...l.children].slice(Object(r.c)(l.children,d));if(i.some(p))return;const u=a.cloneNode(!1);let f;u.setAttribute("transform",s),u.append(...i),o.h.append(u),f=c.f?({changedTouches:[{pageX:e,pageY:o}]})=>{u.setAttribute("transform",s+g(e-t,o-n))}:({x:e,y:o})=>{u.setAttribute("transform",s+g((e-t)*L,(o-n)*L))};const h=Date.now();window.addEventListener(c.c,f,{passive:!0}),window.addEventListener(c.d,()=>{const e=o.a.map(e=>[e,e.getBoundingClientRect()]),t=u.getBoundingClientRect(),n=e.find(([e,n])=>v(t,n)&&b(u,e)),r=n?n[0]:l,a=Date.now();i.forEach(e=>r===l&&a-h>x?O(u,l,e):r.append(e)),u.remove(),window.removeEventListener(c.c,f),y()&&console.log("You've won")},{once:!0})}),{passive:!0}),o.f.onclick=()=>{o.a.forEach(e=>e.classList.remove("consumed")),f.forEach(e=>e.classList.remove("frozen")),N(f)},window.addEventListener("DOMContentLoaded",()=>{N(f),j()}),window.onresize=j}]);