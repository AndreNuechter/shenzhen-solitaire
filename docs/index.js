!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return i})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return h}));const o=[...document.getElementsByClassName("card-slot")],r=[...document.querySelectorAll('[data-slot-type="collection"]')],c=document.getElementsByClassName("consumed"),a=[...document.querySelectorAll('[data-slot-type="dragon"]')],d=document.getElementById("dragon-summoning-btns"),s=document.querySelector('[data-slot-type="flower"]'),i=document.getElementById("reset-btn"),l=document.getElementById("score-display"),u=[...document.querySelectorAll('[data-slot-type="stacking"]')],f=document.getElementById("table"),h=document.getElementById("win-notification")},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return l}));const o=500,r=8,c={x:0,y:0,rx:5},a="http://www.w3.org/2000/svg",d="ontouchstart"in window,[s,i]=d?["touchmove","touchend"]:["pointermove","pointerup"],l=8*(128+r)+r},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return a}));const o=["checked","textContent","data","onpointerdown","onpointerup"];function r(t){return e=>c(t.cloneNode(!1),e)}function c(t,e){return Object.keys(e).forEach(n=>{o.includes(n)?t[n]=e[n]:t.setAttribute(n,e[n])}),t}function a(t,e){return Array.prototype.indexOf.call(t,e)}},function(t,e,n){n(4),t.exports=n(5)},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n(2),c=n(1);const a=document.createElementNS(c.f,"g"),d=Object(r.b)(document.createElementNS(c.f,"rect"),c.b),s=document.createElementNS(c.f,"text"),i=document.createElementNS(c.f,"use"),l={red:"â™•",black:"#war",green:"#biohazard",dragon:"â˜ ",flower:"ðŸ’®"},u=(t,e,n)=>{const o=a.cloneNode(!1),c=Object(r.a)(i)({width:"16px",height:"16px",href:t,stroke:e,fill:e}),d=Object(r.a)(c)({x:"4px",y:"4px"}),l=Object(r.a)(c)({x:"109px",y:"160px"}),u=Object(r.a)(c)({x:"32px",y:"60px",width:"64px",height:"64px"}),f=Object(r.a)(s)({x:"24px",y:"16px",textContent:n}),h=Object(r.a)(s)({x:"96px",y:"173px",textContent:n});return o.append(d,l,u,f,h),o},f=(t,e)=>{const n=Object(r.a)(a)({class:"card"}),o=d.cloneNode(!1),c=(()=>{if(t&&""===e)return u("#skull",t);if("black"===t||"green"===t)return u(l[t],t,e+1);return Object(r.a)(s)({textContent:t?`${l[t]} ${e+1}`:l.flower,x:"8px",y:"16px"})})();return n.append(o,c),Object.assign(n.dataset,{color:t,value:e}),n},h=["black","red","green"].flatMap(t=>Array.from({length:13},(e,n)=>f(t,n<=8?n:"")));h.push(f("",""));var p=h;const g=[/(\d)(,|\))/g,"$1px$2"],m=t=>t.getAttribute("transform").replace(...g),y={dragon:(t,e)=>1===t.children.length&&1===e.children.length,flower:({children:[{dataset:{color:t,value:e}}]})=>!e&&!t,collection:({children:t},{children:e})=>{const n=t[0].dataset,o=e[e.length-1].dataset;return 1===t.length&&(1===e.length&&"0"===n.value||+n.value==+o.value+1&&n.color===o.color)},stacking:({children:[{dataset:t}]},{children:e})=>{const n=e[e.length-1].dataset;return 1===e.length||n.value&&+t.value==+n.value-1&&t.color!==n.color}};function x(t,e){return`translate(${t},${e})`}function b({dataset:{color:t,value:e}},n,o){return n<o.length-1&&(+o[n+1].dataset.value!=e-1||o[n+1].dataset.color===t)}function v(t,e,n,o){const r=m(n),a=m(t),d=`${m(e)}translateY(${(e.children.length-1)*c.c*2*Number("stacking"===e.dataset.slotType)}px)`;[t,e].forEach(t=>{t.style.pointerEvents="none"}),o.append(n),n.animate({transform:[r+a,d],easing:["ease-in","ease-out"]},c.a).onfinish=()=>{e.append(n),[t,e].forEach(t=>{t.style=""})}}let w,E=!1;function j(t){(function(t){for(let e=t.length-1;e>0;e-=1){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t})(t).forEach((t,e)=>o.i[e%8].append(t))}function O(){w=+(c.h/o.j.clientWidth).toFixed(2)}function k({target:t,type:e}){const n=t.closest(".dragon-summoning-btn");n&&n.classList[e.includes("down")?"add":"remove"]("clicked")}Object.assign(o.e,{onclick:function({target:t}){const e=t.closest(".dragon-summoning-btn");if(!e)return;const{color:n}=e.dataset,r=[...o.i,...o.d].reduce((t,{children:e})=>{const{color:o,value:r}=e[e.length-1].dataset;return o!==n||r||t.push(e[e.length-1]),t},[]),c=o.d.find(({children:t})=>1===t.length||!t[1].dataset.value&&t[1].dataset.color===n);if(4===r.length&&c){const t=t=>v(t.parentElement,c,t,o.j);r.forEach((e,n)=>{e.classList.add("frozen"),setTimeout(t(e),25*n)})}},onpointerdown:k,onpointerup:k}),o.g.onclick=function(){o.k.style.display="",E=!1,o.a.forEach(t=>t.classList.remove("consumed")),p.forEach(t=>t.classList.remove("frozen")),j(p)},o.j.addEventListener("pointerdown",(function({target:t,x:e,y:n}){if(E)return;const d=t.closest(".card");if(!d)return;const s=d.parentNode;if(!s.classList.contains("card-slot"))return;const i=s.getAttribute("transform"),l=[...s.children].slice(Object(r.c)(s.children,d));if(l.some(b))return;const u=Date.now(),f=a.cloneNode(!1),h=c.g?({changedTouches:[{pageX:t,pageY:o}]})=>{f.setAttribute("transform",i+x((t-e)*w,(o-n)*w))}:({x:t,y:o})=>{f.setAttribute("transform",i+x((t-e)*w,(o-n)*w))};f.setAttribute("transform",i),f.append(...l),o.j.append(f),E=!0,window.addEventListener(c.d,h,{passive:!0}),window.addEventListener(c.e,()=>{const t=o.a.map(t=>[t,t.getBoundingClientRect()]),e=f.getBoundingClientRect(),n=t.filter(([t,n])=>{return r=n,!((o=e).right<r.left||o.left>r.right||o.bottom<r.top||o.top>r.bottom)&&function(t,e){return y[e.dataset.slotType](t,e)}(f,t);var o,r}),r=(()=>{const t=n.map(([,t])=>function({x:t,y:e,width:n,height:o},{x:r,y:c,width:a,height:d}){const[s,i]=t>r&&e>c?[{x:t,y:e},{x:r+a,y:c+d}]:t<r&&e>c?[{x:r,y:e},{x:t+n,y:c+d}]:t>r&&e<c?[{x:t,y:c},{x:r+a,y:e+o}]:[{x:r,y:c},{x:t+n,y:e+o}];return(i.x-s.x)*(i.y-s.y)}(e,t)),o=Math.max(...t);return t.findIndex(t=>t===o)})(),a=n.length?n[r][0]:s,d=Date.now()-u,i=a===s&&d>c.a;l.forEach(t=>i?v(f,s,t,o.j):a.append(t)),window.removeEventListener(c.d,h),f.remove(),E=!1},{once:!0})}),{passive:!0}),o.k.onclick=()=>o.g.click(),window.addEventListener("DOMContentLoaded",()=>{j(p),O()}),window.onresize=O,window.ondblclick=function({x:t,y:e}){const n=document.elementFromPoint(t,e).closest(".card");if(!n)return;const r=n.parentElement;if(["flower","collection"].includes(r.dataset.slotType))return;if(r.lastChild!==n)return;const{color:c,value:a}=n.dataset;if(!a&&c)return;const d=(()=>{if(!a)return o.f;const t="0"===a?t=>1===t.children.length:({lastChild:{dataset:{color:t,value:e}}})=>t===c&&+e==a-1;return o.b.find(t)})();d&&v(r,d,n,o.j)}},function(t,e,n){"use strict";n.r(e);var o=n(1),r=n(0),c=n(2);const a=JSON.parse(localStorage.getItem("score"))||{score:0};var d=new Proxy(a,{set:(t,e,n)=>(Reflect.set(t,e,n),localStorage.setItem("score",JSON.stringify(t)),!0)});const s=()=>{7===r.c.length&&(d.score+=1,r.h.textContent=d.score+" times so far!",r.k.style.display="block")},i=(t,e)=>t.setAttribute("transform",`translate(0,${e*o.c*2})`),l=({addedNodes:[t]})=>{t.removeAttribute("transform"),t.classList.add("frozen")},u={collection:t=>e=>{e[0].addedNodes.length&&e.forEach(l),10===t.children.length&&(t.classList.add("consumed"),s())},dragon:t=>e=>{e[0].addedNodes.length&&e.forEach(({addedNodes:t})=>{t.forEach(t=>i(t,0))}),t.children.length>2&&(t.classList.add("consumed"),s())},flower:t=>e=>{e[0].addedNodes.length&&(e.forEach(l),t.classList.add("consumed"),s())},stacking:t=>e=>{2===e.length&&e[0].removedNodes[0]===e[1].addedNodes[0]||e.forEach(({addedNodes:e})=>{e.forEach(e=>{i(e,Object(c.c)(t.children,e)-1)})})}};r.a.forEach(t=>{new MutationObserver(u[t.dataset.slotType](t)).observe(t,{childList:!0})})}]);