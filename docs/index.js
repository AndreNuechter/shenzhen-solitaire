!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return d}));const r=[...document.getElementsByClassName("card-slot")],o=(document.querySelectorAll('[data-slot-type="collection"]'),[...document.querySelectorAll('[data-slot-type="dragon"]')]),c=document.getElementById("dragon-summoning-btns"),a=(document.querySelector('[data-slot-type="flower"]'),[...document.querySelectorAll('[data-slot-type="stacking"]')]),d=document.getElementById("table")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return a}));const r=8,o={x:0,y:0,rx:5},c="http://www.w3.org/2000/svg",a="ontouchstart"in window,[d,l]=a?["touchmove","touchend"]:["pointermove","pointerup"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a}));const r=["checked","textContent","data","onpointerdown","onpointerup"];function o(e){return t=>c(e.cloneNode(!1),t)}function c(e,t){return Object.keys(t).forEach(n=>{r.includes(n)?e[n]=t[n]:e.setAttribute(n,t[n])}),e}function a(e,t){return Array.prototype.indexOf.call(e,t)}},function(e,t,n){n(5),e.exports=n(4)},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),c=n(2);const a=(e,t)=>e.setAttribute("transform",`translate(0,${t*r.b*2})`),d={collection:()=>e=>{e.forEach(({addedNodes:[e]})=>{e.removeAttribute("transform"),e.classList.add("card--frozen")})},dragon:()=>e=>{e.forEach(({addedNodes:e})=>{e.forEach(e=>a(e,0))})},flower:()=>e=>{e.forEach(({addedNodes:[e]})=>{e.removeAttribute("transform"),e.classList.add("card--frozen")})},stacking:e=>t=>{t.forEach(({addedNodes:t},n)=>{t.forEach(t=>a(t,((e,t)=>e<0?t:e-1)(Object(c.c)(e.children,t),n)))})}};o.a.forEach(e=>{new MutationObserver(d[e.dataset.slotType](e)).observe(e,{childList:!0})})},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(2),c=n(1);const a=document.createElementNS(c.e,"g"),d=document.createElementNS(c.e,"text"),l=Object(o.b)(document.createElementNS(c.e,"rect"),c.a),u={red:"â™•",black:"â˜ ",green:"Â¥",dragon:"â„¦",flower:"ðŸ’®"},i=(e,t)=>{const n=Object(o.a)(a)({class:"card"}),r=l.cloneNode(!1),c=Object(o.a)(d)({x:8,y:16});return c.textContent=t<9?`${u[e]} ${t+1}`:9===t?u.dragon:u.flower,n.append(r,c),Object.assign(n.dataset,{color:e,value:t}),n},s=["black","red","green"].flatMap(e=>Array.from({length:13},(t,n)=>i(e,n<=8?n:9)));s.push(i("",10));var f=s;const p=e=>{for(let t=e.length-1;t>0;t-=1){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},g=(e,t)=>`translate(${e},${t})`,h=({dataset:{color:e,value:t}},n,r)=>n<r.length-1&&(+r[n+1].dataset.value!=t-1||r[n+1].dataset.color===e),m={dragon:(e,t)=>1===e.children.length&&1===t.children.length,flower:({children:[e]})=>"10"===e.dataset.value,collection:({children:e},{children:t})=>{const n=e[0].dataset,r=t[t.length-1].dataset;return 1===e.length&&(1===t.length&&"0"===n.value||+n.value==+r.value+1&&n.color===r.color)},stacking:({children:[{dataset:e}]},{children:t})=>{const n=t[t.length-1].dataset;return 1===t.length||9!=+n.value&&+e.value==+n.value-1&&e.color!==n.color}},b=(e,t)=>m[t.dataset.slotType](e,t),v=(e,t)=>!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom),y=()=>0===r.d.filter(e=>e.children.length>1).length;r.c.onclick=function({target:e}){const t=e.closest(".dragon-summoning-btn");if(!t)return;const{color:n}=t.dataset,o=[...r.d,...r.b].reduce((e,{children:t})=>{const{color:r,value:o}=t[t.length-1].dataset;return r===n&&"9"===o&&e.push(t[t.length-1]),e},[]),c=r.b.filter(({children:e})=>1===e.length||"9"===e[1].dataset.value&&e[1].dataset.color===n);4===o.length&&c.length&&(c[0].append(...o),c[0].style.pointerEvents="none")},r.e.addEventListener("pointerdown",(function({target:e,x:t,y:n}){if(!e.parentNode.classList.contains("card"))return;const d=e.parentNode,l=d.parentNode,u=l.getAttribute("transform"),i=[...l.children].slice(Object(o.c)(l.children,d));if(i.some(h))return;const s=a.cloneNode(!1);let f;s.setAttribute("transform",u),s.append(...i),r.e.append(s),f=c.f?({changedTouches:[{pageX:e,pageY:r}]})=>{s.setAttribute("transform",u+g(e-t,r-n))}:({x:e,y:r})=>{s.setAttribute("transform",u+g(e-t,r-n))},window.addEventListener(c.c,f,{passive:!0}),window.addEventListener(c.d,()=>{const e=r.a.map(e=>[e,e.getBoundingClientRect()]),t=s.getBoundingClientRect(),n=e.find(([e,n])=>v(t,n)&&b(s,e)),o=n?n[0]:l;i.forEach(e=>o.append(e)),s.remove(),window.removeEventListener(c.c,f),y()&&console.log("You've won")},{once:!0})}),{passive:!0}),window.addEventListener("DOMContentLoaded",()=>{!function(e){p(e).forEach((e,t)=>r.d[t%8].append(e))}(f)})}]);