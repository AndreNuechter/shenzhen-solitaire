!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);const o=[...document.getElementsByClassName("card-slot")],r=(document.querySelectorAll('[data-slot-type="collection"]'),[...document.querySelectorAll('[data-slot-type="dragon"]')]),l=document.getElementById("dragon-summoning-btns"),a=(document.querySelector('[data-slot-type="flower"]'),[...document.querySelectorAll('[data-slot-type="stacking"]')]),c=document.getElementById("start-game-btn"),d=document.getElementById("table"),i=["checked","textContent","data","onpointerdown","onpointerup"];function u(e){return t=>s(e.cloneNode(!1),t)}function s(e,t){return Object.keys(t).forEach(n=>{i.includes(n)?e[n]=t[n]:e.setAttribute(n,t[n])}),e}const p="http://www.w3.org/2000/svg",f={x:0,y:0,rx:5,width:128,height:178},g=document.createElementNS(p,"g"),m=document.createElementNS(p,"text"),h=s(document.createElementNS(p,"rect"),f),v={red:"â™•",black:"â˜ ",green:"Â¥",dragon:"â„¦",flower:"ðŸ’®"},y=(e,t)=>{const n=u(g)({class:"card"}),o=h.cloneNode(!1),r=u(m)({x:8,y:16});return r.textContent=t<9?`${v[e]} ${t+1}`:9===t?v.dragon:v.flower,r.style.fill=e||"purple",n.append(o,r),Object.assign(n.dataset,{color:e,value:t}),n},b=["black","red","green"].flatMap(e=>Array.from({length:13},(t,n)=>y(e,n<=8?n:9)));b.push(y("",10));var w=b;const x=e=>{for(let t=e.length-1;t>0;t-=1){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},E=(e,t)=>`translate(${e},${t})`,S=({dataset:{color:e,value:t}},n,o)=>n<o.length-1&&(+o[n+1].dataset.value!=t-1||o[n+1].dataset.color===e),A={dragon:(e,t)=>1===e.children.length&&1===t.children.length,flower:({children:[e]})=>"10"===e.dataset.value,collection:({children:e},{children:t})=>{const n=e[0].dataset,o=t[t.length-1].dataset;return 1===e.length&&(1===t.length&&"0"===n.value||+n.value==+o.value+1&&n.color===o.color)},stacking:({children:[{dataset:e}]},{children:t})=>{const n=t[t.length-1].dataset;return 1===t.length||9!=+n.value&&+e.value==+n.value-1&&e.color!==n.color}},O=(e,t)=>A[t.dataset.slotType](e,t),N=(e,t)=>!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom);function j(){const e=d.getAttribute("viewBox");d.setAttribute("viewBox",e.replace(/^(-?\d+) -?\d+/,"$1 -8"))}l.onclick=function({target:e}){const t=e.closest(".dragon-summoning-btn");if(!t)return;const{color:n}=t.dataset,o=[...a,...r].reduce((e,{children:t})=>{const{color:o,value:r}=t[t.length-1].dataset;return o===n&&"9"===r&&e.push(t[t.length-1]),e},[]),l=r.filter(({children:e})=>1===e.length||"9"===e[1].dataset.value&&e[1].dataset.color===n);4===o.length&&l.length&&(l[0].append(...o),l[0].style.pointerEvents="none")},c.onclick=j,d.addEventListener("pointerdown",(function({target:e,x:t,y:n}){if(!e.parentNode.classList.contains("card"))return;const r=e.parentNode,l=r.parentNode,a=l.getAttribute("transform"),c=[...l.children].slice((i=l.children,u=r,Array.prototype.indexOf.call(i,u)));var i,u;if(c.some(S))return;const s=g.cloneNode(!1);s.setAttribute("transform",a),s.append(...c),d.append(s);const p=({x:e,y:o})=>{s.setAttribute("transform",a+E(e-t,o-n))};window.addEventListener("pointermove",p,{passive:!0}),window.addEventListener("pointerup",()=>{const e=o.map(e=>[e,e.getBoundingClientRect()]),t=s.getBoundingClientRect(),n=e.find(([e,n])=>N(t,n)&&O(s,e)),r=n?n[0]:l;c.forEach(e=>r.append(e)),s.remove(),window.removeEventListener("pointermove",p)},{once:!0})}),{passive:!0}),window.addEventListener("DOMContentLoaded",()=>{j(),function(e){x(e).forEach((e,t)=>a[t%8].append(e))}(w)})}]);